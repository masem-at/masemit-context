# Story 3.8: FAQ Section

## Status
Draft

## Story
**As a** visitor,
**I want** answers to common questions about tellingCube,
**so that** I can make an informed decision without contacting support.

## Acceptance Criteria

1. FAQ section added to landing page (at bottom, above footer):
   - Section heading: "Frequently Asked Questions"
2. Accordion component displays 5-7 common questions:
   - "What is tellingCube?" → Brief product explanation
   - "How does multi-view consistency work?" → Explanation of event-sourced architecture in plain language
   - "Do I need to create an account?" → Explain ephemeral mode for MVP
   - "What scenarios are available?" → List Bakery, Hotel, Tech Startup
   - "Is my payment secure?" → Mention Stripe handles payment processing
   - "Can I get a refund?" → State refund policy (e.g., 30-day refund for founding members)
   - "How do I contact support?" → Provide email address
3. Accordion interaction: clicking question expands answer, clicking again collapses (accessible via keyboard)
4. Responsive: works on mobile and desktop
5. Copy is clear, benefit-focused, and builds trust

## Tasks / Subtasks

- [ ] Create FAQ Section Component (AC: 1, 4)
  - [ ] Update `app/page.tsx` from Story 3.5
  - [ ] Add FAQ section at bottom of landing page (above footer)
  - [ ] Section container:
    ```tsx
    <section className="bg-gray-50 py-12 px-6">
      <div className="max-w-3xl mx-auto">
        <h2 className="text-3xl font-bold text-gray-900 mb-8 text-center">
          Frequently Asked Questions
        </h2>
        {/* Accordion items */}
      </div>
    </section>
    ```

- [ ] Implement Accordion Component (AC: 2, 3)
  - [ ] Create `components/ui/Accordion.tsx`:
    ```tsx
    'use client'
    import { useState } from 'react'

    interface AccordionItemProps {
      question: string
      answer: string
    }

    export function AccordionItem({ question, answer }: AccordionItemProps) {
      const [isOpen, setIsOpen] = useState(false)

      return (
        <div className="border-b border-gray-200">
          <button
            className="w-full py-4 px-6 text-left flex justify-between items-center hover:bg-gray-100 transition-colors"
            onClick={() => setIsOpen(!isOpen)}
            aria-expanded={isOpen}
          >
            <span className="font-semibold text-gray-900">{question}</span>
            <span className="text-2xl text-blue-600">{isOpen ? '−' : '+'}</span>
          </button>
          {isOpen && (
            <div className="px-6 pb-4 text-gray-700">
              {answer}
            </div>
          )}
        </div>
      )
    }

    export function Accordion({ items }: { items: AccordionItemProps[] }) {
      return (
        <div className="bg-white rounded-lg shadow-sm overflow-hidden">
          {items.map((item, index) => (
            <AccordionItem key={index} {...item} />
          ))}
        </div>
      )
    }
    ```

- [ ] Define FAQ Content (AC: 2, 5)
  - [ ] Create FAQ data array in `app/page.tsx`:
    ```tsx
    const faqItems = [
      {
        question: 'What is tellingCube?',
        answer: 'tellingCube is an AI-powered tool that generates realistic, multi-departmental business scenarios for training and demonstrations. In minutes, it creates 1 year of consistent data across Sales, Finance, and HR views—perfect for consultants, professors, and business trainers.'
      },
      {
        question: 'How does multi-view consistency work?',
        answer: 'Every scenario is built from a unified timeline of business events. When a sale happens, it automatically appears in Sales revenue, Finance cash flow, and HR commission records—all mathematically consistent. No manual reconciliation needed.'
      },
      {
        question: 'Do I need to create an account?',
        answer: 'No! For the founding member launch, you can generate scenarios without creating an account. Just visit tellingcube.com, choose a scenario, and start exploring. Your payment gives you unlimited access.'
      },
      {
        question: 'What scenarios are available?',
        answer: 'Currently available scenarios: Bakery Business (retail operations), Hotel Management (hospitality services), and Tech Startup (SaaS product). Each scenario includes realistic events, customer interactions, and financial transactions spanning 1 full year.'
      },
      {
        question: 'Is my payment secure?',
        answer: 'Absolutely. All payments are processed by Stripe, the industry-leading payment platform trusted by millions of businesses worldwide. We never see or store your credit card information.'
      },
      {
        question: 'Can I get a refund?',
        answer: 'Yes! Founding members have a 30-day money-back guarantee. If tellingCube doesn\'t meet your needs, contact support@tellingcube.com within 30 days of purchase for a full refund.'
      },
      {
        question: 'How do I contact support?',
        answer: 'Email us at support@tellingcube.com. Founding members receive priority support with responses within 24 hours (weekdays).'
      }
    ]
    ```

- [ ] Accessibility Implementation (AC: 3)
  - [ ] Add keyboard support:
    - Enter/Space to toggle accordion items
    - Tab to navigate between questions
  - [ ] Add ARIA attributes:
    - `aria-expanded` on button
    - `aria-controls` linking button to content
    - `role="button"` for semantic HTML
  - [ ] Enhance Accordion component:
    ```tsx
    <button
      className="..."
      onClick={() => setIsOpen(!isOpen)}
      onKeyDown={(e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault()
          setIsOpen(!isOpen)
        }
      }}
      aria-expanded={isOpen}
      aria-controls={`faq-answer-${index}`}
    >
      {/* ... */}
    </button>
    <div
      id={`faq-answer-${index}`}
      className={isOpen ? 'block' : 'hidden'}
    >
      {/* ... */}
    </div>
    ```

- [ ] Responsive Design (AC: 4)
  - [ ] Mobile (<640px):
    - Full-width accordion items
    - Touch-friendly button height (min 44px)
    - Padding: `py-4 px-4`
  - [ ] Desktop (≥1024px):
    - Centered max-width container (max-w-3xl)
    - Hover states on accordion buttons
    - Padding: `py-4 px-6`
  - [ ] Test at breakpoints: 375px, 768px, 1024px

- [ ] Visual Polish & Animations (Optional Enhancement)
  - [ ] Add smooth expand/collapse animation:
    ```tsx
    <div
      className={`overflow-hidden transition-all duration-300 ${
        isOpen ? 'max-h-96' : 'max-h-0'
      }`}
    >
      <div className="px-6 pb-4 text-gray-700">
        {answer}
      </div>
    </div>
    ```
  - [ ] Add icon rotation animation for +/− symbol
  - [ ] Add subtle shadow on hover

- [ ] Testing
  - [ ] Click each accordion item → expands/collapses correctly
  - [ ] Keyboard navigation works (Tab + Enter)
  - [ ] Multiple items can be open simultaneously (not exclusive)
  - [ ] Mobile touch targets are 44px minimum height
  - [ ] Content is readable on all screen sizes
  - [ ] Run `pnpm lint` and `pnpm build`

## Dev Notes

### Component Architecture
[Source: Epic 2 component patterns]

**File Structure:**
- `components/ui/Accordion.tsx` - Reusable accordion component
- `app/page.tsx` - Imports and uses Accordion with FAQ data

**Why Separate Component:**
- Reusable for future FAQ sections (e.g., pricing FAQ)
- Cleaner separation of concerns (UI vs content)
- Easier to test and maintain

### FAQ Content Strategy
[Source: PRD - Background Context + Story 3.5 pricing]

**Question Selection Criteria:**
1. **Product Understanding**: "What is tellingCube?" (awareness)
2. **Technical Differentiation**: "How does multi-view consistency work?" (education)
3. **Friction Reduction**: "Do I need an account?" (removes barrier)
4. **Product Discovery**: "What scenarios available?" (feature awareness)
5. **Trust Building**: "Is payment secure?" (security concerns)
6. **Risk Mitigation**: "Can I get a refund?" (purchase confidence)
7. **Support Access**: "How do I contact support?" (safety net)

**Copy Tone:**
- Professional yet friendly
- Direct and concise answers
- Builds trust through transparency
- Avoids technical jargon where possible

### Accessibility Best Practices
[Source: NFR3 - Usability + WCAG 2.1]

**Keyboard Navigation:**
- Tab: Move between accordion items
- Enter/Space: Toggle open/closed
- Focus visible on keyboard navigation

**Screen Reader Support:**
- `aria-expanded` indicates open/closed state
- `aria-controls` links button to content panel
- Semantic button elements (not divs with onClick)

**Touch Targets:**
- Minimum 44×44px for mobile (WCAG 2.1 Level AAA)
- Full-width clickable area (easier to tap)

### Accordion Interaction Pattern
[Source: Common UI patterns]

**Single vs Multi-Expand:**
- **MVP Choice**: Multi-expand (multiple items can be open)
- **Rationale**: Users may want to compare answers
- **Future**: Add exclusive mode if needed (only one open at a time)

**Open by Default:**
- **MVP Choice**: All closed by default
- **Alternative**: First item open (reduces friction)
- **Rationale**: Let users choose what to explore

### Brand Consistency
[Source: Story 3.1, 3.3 - Visual design]

**Colors:**
- Section background: `bg-gray-50` (subtle contrast)
- Accordion items: `bg-white` (cards on gray background)
- Question text: `text-gray-900` (high contrast)
- Answer text: `text-gray-700` (readable body text)
- Icons/accents: `text-blue-600` (#2563EB)

**Typography:**
- Section heading: `text-3xl font-bold`
- Questions: `font-semibold text-gray-900`
- Answers: `text-gray-700` (default body)

**Spacing:**
- Section padding: `py-12 px-6`
- Item padding: `py-4 px-6`
- Answer padding: `px-6 pb-4`

### Animation Performance
```tsx
// Smooth height animation (CSS-based)
<div
  className={`overflow-hidden transition-all duration-300 ease-in-out ${
    isOpen ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0'
  }`}
>
  {/* Content */}
</div>
```

**Performance Consideration:**
- Use CSS transitions (GPU-accelerated)
- Avoid JavaScript-based animations for simple expand/collapse
- `max-h-96` assumes answers won't exceed ~24rem (adjust if needed)

### Known Constraints
[Source: PRD - Post-PoC deferred items]

**MVP Scope:**
- Static FAQ content (no CMS integration)
- Simple accordion (no search/filter)
- Manual content updates (hardcoded in component)

**Post-PoC Enhancements:**
- FAQ search functionality
- FAQ categories/filtering
- Analytics tracking (which questions most viewed)
- Dynamic FAQ from CMS

### Integration with Landing Page
[Source: Stories 3.1, 3.3, 3.5]

**Landing Page Structure (Top to Bottom):**
1. Hero Section (Story 3.1)
2. Problem & Solution Section (Story 3.3)
3. Scenario Generation Buttons (Story 3.1)
4. Pricing Section (Story 3.5)
5. **FAQ Section** ← THIS STORY
6. Footer (if added)

**Visual Flow:**
- Gray-50 background creates visual break from white pricing cards
- Centered max-width (max-w-3xl) keeps content readable
- Accordion cards provide interactive engagement before conversion

### Example Component Usage
```tsx
// In app/page.tsx
import { Accordion } from '@/components/ui/Accordion'

export default function HomePage() {
  const faqItems = [
    { question: '...', answer: '...' },
    // ... more items
  ]

  return (
    <>
      {/* Hero, Problem/Solution, Scenarios, Pricing */}

      {/* FAQ Section */}
      <section className="bg-gray-50 py-12 px-6">
        <div className="max-w-3xl mx-auto">
          <h2 className="text-3xl font-bold text-gray-900 mb-8 text-center">
            Frequently Asked Questions
          </h2>
          <Accordion items={faqItems} />
        </div>
      </section>
    </>
  )
}
```

### TypeScript Type Definitions
```typescript
interface AccordionItemProps {
  question: string
  answer: string
}

interface AccordionProps {
  items: AccordionItemProps[]
}
```

### Testing Checklist
[Source: Epic 2 manual testing patterns]

**Manual Test Cases:**
- [ ] Click question → answer expands
- [ ] Click again → answer collapses
- [ ] Click multiple questions → all stay open (multi-expand mode)
- [ ] Tab navigation → focuses each question button
- [ ] Enter/Space on focused button → toggles accordion
- [ ] Mobile: Touch targets are easy to tap (44px height)
- [ ] Mobile: Content doesn't overflow or break layout
- [ ] Desktop: Hover state shows visual feedback
- [ ] All answers display correctly without text truncation
- [ ] Smooth animation when expanding/collapsing

**Accessibility Audit:**
- [ ] Screen reader announces expanded/collapsed state
- [ ] Keyboard navigation works without mouse
- [ ] Focus indicator visible on all interactive elements
- [ ] Color contrast meets WCAG AA standards (4.5:1 for body text)

## QA Results

### Review Date: 2025-11-20

### Reviewed By: Quinn (Test Architect)

### Code Quality Assessment

The FAQ section implementation is functionally solid and follows good architectural patterns. The developer made an excellent choice using shadcn/ui's accordion component (built on Radix UI), which provides robust accessibility features out of the box. The component structure is clean with proper separation of concerns - the FAQSection component uses the reusable ui/accordion components effectively.

**Strengths:**
- Clean component architecture with proper TypeScript typing
- Good use of established, accessible library (Radix UI)
- Well-written FAQ content that is benefit-focused and builds trust
- Proper responsive design classes implemented
- Correct integration into landing page flow (between Pricing and Footer)
- Follows project naming conventions and coding standards

**Concerns:**
- Missing animation definitions for `animate-accordion-up` and `animate-accordion-down` referenced in accordion.tsx
- No automated tests despite story having testing tasks
- AC7 (support contact) only partially addressed - support email mentioned in FAQ but not as explicitly as story suggests
- Keyboard navigation relies on Radix defaults (good) but not explicitly tested/verified
- Only 6 FAQ items (lower end of 5-7 range in AC2)

### Refactoring Performed

No refactoring performed during this review. The code quality is good and follows established patterns. Issues identified require deliberate implementation decisions rather than refactoring.

### Compliance Check

- Coding Standards: ✓ PASS
  - Follows Next.js 14 and React patterns
  - Proper TypeScript usage with correct typing
  - Component naming follows PascalCase convention
  - Import structure is clean and organized
  - No linting errors related to FAQ components

- Project Structure: ✓ PASS
  - Components correctly placed in `components/landing/` and `components/ui/`
  - Follows shadcn/ui pattern for reusable UI components
  - Integration in `app/page.tsx` is clean and properly ordered

- Testing Strategy: ✗ FAIL
  - No test files found for FAQ section or accordion component
  - Story includes testing tasks (keyboard navigation, responsive, interactions)
  - No evidence of manual testing documentation
  - Critical gap: AC3 (keyboard navigation) requires verification

- All ACs Met: ~ PARTIAL
  - AC1: ✓ Section added to landing page above footer
  - AC2: ✓ Accordion displays 6 questions (within 5-7 range but at lower bound)
  - AC3: ~ Accordion interaction works via Radix but keyboard navigation not explicitly tested
  - AC4: ✓ Responsive classes present (md: breakpoints, max-w-3xl, touch-friendly)
  - AC5: ✓ Copy is clear, benefit-focused, and builds trust
  - AC7: ~ Support contact mentioned in FAQ but not as explicit as story requirement suggests

### Improvements Checklist

- [ ] Add Tailwind animation keyframes to `tailwind.config.ts`:
  ```typescript
  theme: {
    extend: {
      keyframes: {
        "accordion-down": {
          from: { height: "0" },
          to: { height: "var(--radix-accordion-content-height)" },
        },
        "accordion-up": {
          from: { height: "var(--radix-accordion-content-height)" },
          to: { height: "0" },
        },
      },
      animation: {
        "accordion-down": "accordion-down 0.2s ease-out",
        "accordion-up": "accordion-up 0.2s ease-out",
      },
    }
  }
  ```

- [ ] Update FAQ "How do I contact support?" answer to explicitly include email:
  ```typescript
  answer: "Email us at support@tellingcube.com. Founding members receive priority support with responses within 24 hours (weekdays)."
  ```

- [ ] Create test file `components/landing/__tests__/FAQSection.test.tsx`:
  - Test accordion expand/collapse functionality
  - Test keyboard navigation (Tab, Enter, Space)
  - Test that all 6 FAQ items render correctly
  - Test responsive behavior at different breakpoints

- [ ] Run accessibility audit with axe-core or Lighthouse:
  - Verify WCAG 2.1 Level AA compliance
  - Confirm keyboard navigation works (Tab + Enter/Space)
  - Verify screen reader announcements for expanded/collapsed state
  - Validate touch target sizes (min 44x44px)

- [ ] Consider adding 7th FAQ question or consolidating existing content to explicitly address AC7

### Security Review

Status: PASS

No security concerns identified. This is a static content component with no user input, no API calls, and no sensitive data handling. The accordion component is from Radix UI, a well-vetted and widely-used accessible component library.

**Security Considerations:**
- No XSS risk - content is hardcoded, not user-generated
- No injection vulnerabilities - no database queries or API calls
- No sensitive information exposure - FAQ content is intentionally public
- Dependency security - @radix-ui/react-accordion@1.2.12 is up-to-date

### Performance Considerations

Status: CONCERNS (Minor)

**Identified Issues:**
1. Missing animation definitions may cause console warnings or layout shifts
   - Impact: Low - accordion still functional but animations may not work correctly
   - Fix: Add keyframes to tailwind.config.ts (see Improvements Checklist)

2. Radix UI accordion uses CSS animations which are GPU-accelerated (good)
   - No JavaScript animation overhead
   - Smooth 60fps animations when properly configured

3. Component is client-side interactive but small bundle size
   - Radix Accordion primitive is ~5KB gzipped
   - FAQ content is inline (no async loading needed)
   - No performance concerns for page load

**Recommendations:**
- Add animation definitions immediately to prevent potential issues
- Consider code splitting if FAQ section grows significantly (not needed now)
- FAQ schema markup (JSON-LD) could improve SEO without performance cost

### Files Modified During Review

No files were modified during this review. All issues require deliberate implementation decisions by the developer.

**Files Requiring Updates:**
- `tailwind.config.ts` - Add animation keyframes
- `components/landing/FAQSection.tsx` - Update support contact answer
- `components/landing/__tests__/FAQSection.test.tsx` - Create test file (new)

Developer should update the File List in the story after addressing these items.

### Gate Status

Gate: CONCERNS → docs/qa/gates/3.8-faq-section.yml

**Quality Score: 70/100**

**Gate Decision Rationale:**
- Implementation is functionally solid and well-architected
- Core functionality works as expected
- Missing critical elements: tests, animation definitions, explicit support contact
- Accessibility relies on Radix defaults (good) but needs verification
- Issues are medium severity - not blocking but should be addressed

**Top Issues Summary:**
1. Missing animation definitions (Medium) - May cause visual issues
2. No automated tests (Medium) - Testing tasks in story, but not implemented
3. Support contact not explicit (Medium) - AC7 requirement partially met
4. Keyboard navigation not tested (Low) - Works via Radix but needs verification

### NFR Validation Results

**Security: PASS**
- No security concerns for static content component
- Uses vetted library (Radix UI)
- No user input or sensitive data

**Performance: CONCERNS**
- Missing animation definitions may cause issues
- Otherwise performant (CSS animations, small bundle)

**Reliability: PASS**
- Simple, robust component structure
- Radix UI is battle-tested
- No error-prone logic

**Maintainability: PASS**
- Clean code with good separation of concerns
- Well-organized FAQ data structure
- Follows project standards

### Recommended Status

✗ Changes Required - See unchecked items above

**Blockers:**
1. Add Tailwind animation definitions (quick fix, high impact)
2. Add automated tests for keyboard navigation and responsive behavior
3. Update support contact answer to be more explicit

**Priority:** These changes should be implemented before marking story as Done. The FAQ section is functional but incomplete according to story requirements (testing) and has potential visual issues (missing animations).

**Estimated Effort:** 2-3 hours
- Animation definitions: 15 minutes
- FAQ content update: 5 minutes
- Basic tests: 1-2 hours
- Accessibility verification: 30 minutes

Story owner should address these items and update status to "Ready for Done" after implementation and verification.

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-11-19 | 1.0 | Initial story draft for Epic 3 | Bob (Scrum Master) |
| 2025-11-20 | 1.1 | QA review completed, gate status: CONCERNS | Quinn (Test Architect) |
